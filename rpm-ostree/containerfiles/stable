FROM registry.playtron.one/internal/playtronos:0.19.0.12

# Set OS version
COPY rootfs/usr/lib/os-release-playtron /usr/lib/

RUN wget \
  https://kojipkgs.fedoraproject.org//packages/gamescope/3.14.2/2.fc41/x86_64/gamescope-3.14.2-2.fc41.x86_64.rpm

RUN rpm-ostree uninstall \
  gamescope \
  gamescope-session \
  gamescope-session-playtron \
  inputplumber \
  grid \
  playserve \
  playtron-os-files

RUN rpm-ostree install \
  gamescope*.rpm \
  gamescope-session-playtron \
  inputplumber \
  grid \
  playserve \
  playtron-os-files \
  && ostree container commit

RUN rm *.rpm \
  && ostree container commit

# View final packages.
RUN rpm -qa | sort
